const Gio = imports.gi.Gio;
const Lang = imports.lang;

let EosKnowledge;

let _oldSearchPath = imports.searchPath;
imports.searchPath.unshift('@pkgdatadir@/overrides');

const Hello = imports.hello;
const Card = imports.card;

imports.searchPath = _oldSearchPath;

function _init() {
    // "this" is imports.gi.EosKnowledge
    EosKnowledge = this;

    // Hackzors. We need to load the gresource from javascript before any C
    // calls are made (to load the CSS). By referencing one of our C functions
    // here we force the C lib to be initialized along with it its gresource
    this.hello_c;

    Lang.copyPublicProperties(Hello, EosKnowledge);
    Lang.copyPublicProperties(Card, EosKnowledge);
}
